/*! dxtpl by DXkite 2016-12-14 */
!function(a){function b(a,b){try{new Function(a)}catch(a){return"throw "+a.name+"("+e(a.message)+");{"}return b}function c(a,b){var c="";return a.match(/(?!^)\n/)?u(a.split("\n"),function(a){a&&(b&&(a=a.replace(/\s+/g," ").replace(/<!--.*?-->/g,"")),a&&(c+=q[1]+e(a)+q[2],c+="\n"))}):a&&(c+=q[1]+e(a)+q[2]),c}function d(a){var c;if(!(c=a.match(new RegExp(p))))return(c=a.match(/^!.*$/))?q[1]+"$_unit._echo("+c[1]+")"+q[2]:q[1]+"$_unit._escape("+a+")"+q[2];var d=c[1],e=c[2];switch(d){case"include":return e=e.trim().split(" "),1===e.length&&e.push("$_unit.value"),e=e.join(","),q[1]+"$_unit._include("+e+")"+q[2];case"if":return b("if("+e+"){}","if ("+e+") {");case"else":return(c=e.match(/^\s*if\s+(.*)/))?"} else if ("+c[1]+"){":"}else{";case"/if":case"/while":case"/for":return"}";case"while":return b("while("+e+"){}","while ("+e+") {");case"for":return b("for("+e+"){}","for ("+e+") {");case"each":var c=e.match(/(\w+)\s+(?:(?:as(?:\s+(\w+)))?(?:(?:\s+:)?\s+(\w+))?)?/);if(c){var f,g=c[1];return f=c[2]?c[3]?c[3]+","+c[2]:c[2]:"value,index","$_unit._each("+g+",function("+f+"){"}return'throw SyntaxError("Null Each Value");$_unit._each(null,function(){';case"/each":return"});"}}function e(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b,c,d){var a=a||"anonymous",e="DxTPL Error:";if(console.group(e),b){var f=b.replace(/^\n/,"").split("\n"),g=c-5>0?c-5:1,h=c+5>f.length?f.length:c+5;console.error(d);for(var i=g;i<h;i++)i==c?console.log(i+"|%c"+f[c-1]+"\t\t%c->\t\t%c"+d.name+":"+d.message,"color:red;","color:green;","color:red;"):console.log(i+"|"+f[i-1])}else console.log(b),console.log("%c"+e+d.message+"\t\t@"+a+":"+c,"color:red;");console.groupEnd(e)}function h(a,b){var e="";return a=a.replace(/^\n/,""),u(a.split(b.tagstart),function(a){var f=a.split(b.tagend);1===f.length?e+=c(f[0],b.compress):(e+=d(f[0]),e+=c(f[1]))}),e}function i(a,b,c){var d=void 0===c||c,e=[];e.push("var $_unit=this,"+q[0]);for(var f in b)e.push(f+"=this.value."+f);var g="";return d&&(g='"use strict";'),g+=e.join(","),g+=";",g+=a+"return new String("+q[3]+");"}function j(a,b){var c=document.querySelectorAll(a);v(c,function(c,d){var e,f=c.innerHTML,i=n;if(c.dataset.init)try{var j=new Function("return "+c.dataset.init+";");e=j()}catch(b){g(a+"["+d+"]",null,0,new Error("Unsupport json"))}if(c.dataset.config)try{var j=new Function("return "+c.dataset.config+";"),l=j();i=w(i,l)}catch(b){g(a+"["+d+"]",null,0,new Error("Unsupport json"))}e=w(e,b);var m=h(f,i);c.innerHTML=k(a,f,m,e,i.strict)})}function k(a,b,c,d,e){var f,h=i(c,d,e),j={_each:u,_echo:s,_escape:t,_include:x,value:d};try{var k=new Function(h);f=k.call(j)}catch(c){var l=new String(c.stack).match(/<anonymous>:(\d+):\d+/);if(l){var m=l[1]-1;g(a,b,m,c)}else{var a=a||"anonymous",l=new String(c.stack).match(/Function code:(\d+):\d+/);l?console.error("DxTPL:Compile Error@"+a+" Line "+l[1]):console.error("DxTPL:Compile Error@"+a)}}return f}function l(a,b){var c=document.getElementById("template_caches");c||(c=document.createElement("div"),c.id="template_caches",c.style.display="none",document.body.appendChild(c));var d="template_cache_"+a,e=document.getElementById("template_cache_"+a);return e||(e=document.createElement("div"),e.id=d,e.innerText=h(document.getElementById(a).innerHTML,b||n),c.appendChild(e)),e.innerText}function m(a,b){var c=a||b.id,d=!1;if("string"!=typeof c)throw Error("Unsupport Template ID");var e=document.getElementById(c);return e?b.source=e.innerHTML:(b.source=c,b.id="anonymous",d=!0),b.code||(b.cache&&!d?b.code=l(c,b):b.code=h(b.source,b)),b}var n={cache:!0,tagstart:"{",tagend:"}",compress:!0,strict:!0},o="if,else,each,include,while,for",p="^\\s*((?:/)?(?:"+o.split(",").join("|")+"))(.*)",q="".trim?["$_tpl_=''","$_tpl_+=",";","$_tpl_"]:["$_tpl_=[]","$_tpl_.push(",");","$_tpl_.join('')"],r={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},s=function(a){return new String(a)},t=function(a){return s(a).replace(/&(?![\w#]+;)|[<>"']/g,function(a){return r[a]})},u=function(a,b){if(f(a))v(a,b);else for(var c in a)b.call(a[c],a[c],c)},v=function(a,b){for(var c=0;c<a.length;++c)b.call(a[c],a[c],c)},w=function(a){for(var b={},c=0;c<arguments.length;c++)for(var d in arguments[c])b[d]=arguments[c][d];return b},x=function(a,b){return new y(a).render(b)},y=function(a,b){var c=n;"string"==typeof a?(c=w(c,b),c.id=a):c=w(c,a),this.config(c)};y.prototype.config=function(a){for(var b in a)this[b]=a[b];return this},y.prototype.assign=function(a,b){return this.value[a]=w(this.value[a],b),this},y.prototype.value=function(a){return this.value=w(this.value,a),this},y.prototype.compile=function(a){var b=w(this,m(a,this));return new y(b)},y.prototype.render=function(a){if(!this.source||!this.code){var b=m(this.id,this);this.config(b)}return k(this.id,this.source,this.code,a,this.strict)},a.dxtpl=new y,a.Template=y,a.renderTpl=j}(window);